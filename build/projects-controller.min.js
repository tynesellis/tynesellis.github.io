/*! tynesellis.github.io 2017-11-02 */

const retrievedProjectsDB=JSON.parse(localStorage.getItem("projectsDBLocal")),projectsHTML=document.getElementById("projects"),backButtonHTML=document.getElementById("backItUp"),searchBar=document.getElementById("searchProjects"),loadAllProjects=function(){retrievedProjectsDB.forEach(function(t){projectsHTML.innerHTML+=`\n            <article class="container mt-1 pb-5 contentBoxes">\n            <h3 class="project_name display-4"><span class="font-weight-bold">Project: </span>${t.name}</h3>\n            <p class="project_description"><span class="font-weight-bold">Description: </span>${t.description}</p>\n            <p class="project_completion"><span class="font-weight-bold">Completion Date: </span>${t.date_completed}</p>\n            <p class="project_tech"><span class="font-weight-bold">Technologies Used: </span>${t.technologies}</p>                \n            <p class="project_contributors"><span class="font-weight-bold">Contributors: </span>${t.contributors}</p>\n            <p class="project_location"><span class="font-weight-bold">Location: </span><a href="${t.location}" target="_blank">GitHub</a></p>\n            </article>\n            `})};loadAllProjects(),searchBar.addEventListener("keyup",function(){let t=event.target.value.toLowerCase();if(0===event.target.value.length&&(projectsHTML.innerHTML="",loadAllProjects()),t.length>=3||13===event.keyCode){const e=retrievedProjectsDB.filter(function(e){for(let n in e)if(e[n].toString().toLowerCase().includes(t))return e});printedResults="",e.forEach(function(t){printedResults+=`\n            <article class="searchedProjectsResults container mt-1 pb-5 contentBoxes">\n            <h3 class="project_name display-4"><span class="font-weight-bold">Project: </span>${t.name}</h3>\n            <button id="${t.projectID}" class="contentBoxes">...Click for more</button> \n            </article>\n            `}),backButtonHTML.innerHTML='<button class="contentBoxes" id="backToAllProjects">Back to all projects</button>',document.getElementById("backToAllProjects").addEventListener("click",function(){searchBar.value="",backButtonHTML.innerHTML="",projectsHTML.innerHTML="",loadAllProjects()}),projectsHTML.innerHTML=printedResults;const n=document.getElementsByClassName("searchedProjectsResults");for(let t=0;t<n.length;t++)n[t].addEventListener("click",function(t){searchBar.value="",projectsHTML.innerHTML="",retrievedProjectsDB.forEach(function(e){e.projectID.toString()===t.target.id&&(projectsHTML.innerHTML+=`\n                            <article class="container mt-1 pb-5 contentBoxes">\n                            <h3 class="project_name display-4"><span class="font-weight-bold">Project: </span>${e.name}</h3>\n                            <p class="project_description"><span class="font-weight-bold">Description: </span>${e.description}</p>\n                            <p class="project_completion"><span class="font-weight-bold">Completion Date: </span>${e.date_completed}</p>\n                            <p class="project_tech"><span class="font-weight-bold">Technologies Used: </span>${e.technologies}</p>                \n                            <p class="project_contributors"><span class="font-weight-bold">Contributors: </span>${e.contributors}</p>\n                            <p class="project_location"><span class="font-weight-bold">Location: </span><a href="${e.location}" target="_blank">GitHub</a></p>\n                            </article>\n                        `)})})}});